!function(){"use strict";function a(a){function e(e,i){var r;return angular.forEach(n,function(a){if(a.name===e)return void(r=a)}),r||(r=new t(e,i,a),n.push(r)),r}var i=this,n=[];i.get=e}function t(a,t,e){function i(){y.data=[],n()}function n(){y.subject.onNext(angular.copy(y.data))}function r(a){var t;return angular.forEach(y.data,function(e){if(e[y.keyField]===a)return void(t=angular.copy(e))}),t}function u(a){y.multicasted.subscribe(a),y.multicasted.connect()}function o(a){s(a);var t=!1;if(angular.forEach(y.data,function(e){if(e[y.keyField]===a[y.keyField])return void(t=!0)}),t)throw"Entity with '"+y.keyField+"': "+a[y.keyField]+" already existed.";y.data.push(angular.copy(a)),n()}function c(a){s(a);var t=!1;if(angular.forEach(y.data,function(e,i){if(e[y.keyField]===a[y.keyField])return t=!0,y.data.splice(i,1,angular.copy(a)),void n()}),!t)throw"Entity with '"+y.keyField+"': "+a[y.keyField]+" not existed."}function d(a){s(a);var t=!1;angular.forEach(y.data,function(e,i){if(e[y.keyField]===a[y.keyField])return t=!0,void y.data.splice(i,1,angular.copy(a))}),t||y.data.push(angular.copy(a)),n()}function l(a){angular.forEach(a,function(a){s(a);var t=!1;angular.forEach(y.data,function(e,i){if(e[y.keyField]===a[y.keyField])return t=!0,void y.data.splice(i,1,angular.copy(a))}),t||y.data.push(angular.copy(a))}),n()}function f(a){angular.forEach(y.data,function(t,e){if(t[y.keyField]===a)return y.data.splice(e,1),void n()})}function s(a){if(!a[y.keyField])throw"Entity is not valid."}var y=this;y.data=[],y.name=a,y.keyField=t||"id",y.listObservable=e.Observable.create(function(a){a.next(angular.copy(y.data))}),y.subject=new e.Subject,y.multicasted=y.listObservable.multicast(y.subject),y.add=o,y.addList=l,y.addOrUpdate=d,y.clear=i,y.find=r,y.observeList=u,y.remove=f,y.update=c}angular.module("tw.repositories",["rx"]).service("twRepositories",a),a.$inject=["rx"]}();